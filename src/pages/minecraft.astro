---
import { getGameWithTheme, getServersByGameId } from '../utils/games';
import GameWithServersTemplate from '../components/GameWithServersTemplate.astro';

// Obtener datos del juego de Minecraft con tema
const { data: game, error: gameError } = await getGameWithTheme('Minecraft');

if (gameError || !game) {
  console.error('Error fetching Minecraft game:', gameError);
  return Astro.redirect('/404');
}

// Obtener servidores del juego
const { data: servers, error: serversError } = await getServersByGameId(game.id);

if (serversError) {
  console.error('Error fetching servers:', serversError);
}

const gameServers = servers || [];
---

<GameWithServersTemplate 
  game={game}
  themeConfig={game.theme_config || {}}
/>